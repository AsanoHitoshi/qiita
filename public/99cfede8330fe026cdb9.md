---
title: 今更やけど、Virtual BoxでCentOS7の仮想サーバーを立てよう！
tags:
  - Mac
  - CentOS
  - Apache
  - VirtualBox
private: false
updated_at: '2020-02-02T00:07:54+09:00'
id: 99cfede8330fe026cdb9
organization_url_name: null
slide: false
ignorePublish: false
---
唐突ですが、仮想サーバーって便利ですよね。便利な理由は色々ありますが、OSから開発環境を同じにできること、簡単に潰せる、移植が簡単、構築も簡単にできるとかですかね。とにかく仮想環境を立てれないと開発が始まらないと行った感じです笑
今回のテーマは「VirtualBoxを使ってCentOS7の仮想サーバーを作ろう」です！！
では、やっていきましょう！！！

#.isoファイルのダウンロード
まず、isoファイルをダウンロードしましょう！！
.isoファイルとはCDやDVDなどの中身を１つにまとめたファイルのことです。
OSをパソコンにインストールする際に使用するデータが入っているものです。
今回、作成する仮想サーバーはCentOS7なので、CentOS7のイメージファイルをダウンロードしましょう
このファイルをVirtualBoxに取り入れることで仮想マシンを作成できます
##ダウンロード方法
CentOS公式サイト
https://www.centos.org/download/
以上のサイトからダウンロードを実行しましょう
CentOS７ですので、OlderVersionsにアクセスしましょう
![スクリーンショット 2020-02-01 23.01.47.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/429676/cad0e574-3d1c-9579-4872-03b4d72babe8.png)
CentOS７のmirrosをクリック
<img width="1370" alt="スクリーンショット 2020-01-28 20.57.13.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/429676/63cb0b67-71ae-7774-17b1-45b2267ef700.png">
以下の中から好きなものを選んでくれたらOKで
今回は一番上のものを選びます
![スクリーンショット 2020-02-01 23.02.20.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/429676/59bcd544-de73-8ade-80af-a7349813bdcf.png)
最小限の情報しかいらないので、CentOS-7-x86_64-Minimal-1908.isoをダウンロードしましょう
![スクリーンショット 2020-02-01 23.02.37.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/429676/45918d80-f4ff-b4f9-e05d-061ae317eb82.png)
以上でisoファイルのダウンロード終了です。
#VirtualBoxのダウンロード
VirtualBoxをダウンロードしましょう。
もうすでにダウンロード済みの方は次の章まで飛ばしてください
下記の公式サイトからダウンロードしてください
**VirtualBox　公式サイト**
　　https://www.virtualbox.org/wiki/Downloads
ダウンロード後は指示に従いインストールしてください
#ホストオンリーネットワークの作成
ホストネットワークマネージャーからネットワークを新規作成します
VirtualBoxを起動させましょう
![スクリーンショット 2020-01-28 23.04.05.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/429676/7cde18ea-3dd2-15e9-181c-3a73fee833d9.png)
上記の場所からホストネットワークマネージャーを起動させます。
作成をクリックすると自動でネットワークが作成されます
作成が完了したら、次に進みましょう！！
#仮想マシンの新規作成
それでは仮想マシンをVirtualBoxで作成していきましょう
まず、新規作成をクリックして、作成する仮想マシンの名前をつけてください
設定は以下の通りにして下さい。
タイプとバージョンだけ設定して他は初期設定で大丈夫です。

|項目|設定値|
|:------------------:|:------------------:|
|       タイプ      |Linux|
|       バージョン      |RedHut（６４-bit）|
|     メモリ       |デフォルト|
|ハードディスク      |デフォルト|
|　　ハードディスクのファイルタイプ    |デフォルト|
|  　　物理ハードディスクにあるストレージ     |デフォルト|
|　ファイルの場所|デフォルト|

**仮想マシンがとりあえずできました。**
#仮想マシンの設定変更
作成した仮想マシンの設定をします
仮想マシンを選択し設定をクリックしましょう
##システム＞起動順序
フロッピーのチェックを外す
##ストレージ＞コントローラー:IDE下のディスクのアイコン
光学ドライブの右端のディスクアイコン
仮想光学ディスクファイルを選択
最初にダウンロードした.isoファイルを選択しましょう
##ネットワークアダプタの設定
次にネットワークアダプタの設定をします。
今回使用するアダプタはNATとホストオンリーネットワークの2つです。
色々な設定の方法があるので、是非他の方法も試してみて下さい。
NATはホストマシンが外部との通信です
ホストオンリーアダプタは仮想マシンとホストマシンの通信と仮想マシン同士の通信のことです。
詳しくは**VirtualBox のネットワークアダプタまとめ**をご覧ください
[https://qiita.com/pitao/items/0f9475e4c0e230911eb7](https://qiita.com/pitao/items/0f9475e4c0e230911eb7)
##ネットワーク＞アダプタ１
デフォルトでNATになっているので、そのままにしてください
##ネットワーク＞アダプタ２＞割り当て
ネットワークアダプタを有効にするにチェック
割り当てをホストオンリーアダプタに設定します。
上で作成したホストオンリーネットワークを選択して下さい
#起動
仮想マシンを起動します
CentOSのインストールが開始されます
#SSH接続
直接CentOSに入って操作してもいいのですが、使い勝手があまり良くありません
なので、SSH通信で操作するようにしましょう
IPアドレスは上で設定したホストネットワークマネージャーで設定した画面から確認して下さい。
このゲストOSに設定したホストオンリーアダプターのIPアドレスを確認してください
ゲストOS上でip -aのコマンドでも確認できます
ホストOSのコマンドラインから下記のコマンドでCentOSにアクセスできます

```:ターミナル
ssh root@ゲストOSのIPアドレス
```

接続できれば完了です
しかし、SSH接続でなくサーバーを直接触ってもいいので、好みに合わせて下さい。

#Apacheのインストール
ここまででCentOS７が入れることができました。
しかし、これだけではWebサーバーとして動いてくれません！！
Webサーバーとして動かすためにはApacheという世界中で使用されているWebサーバーソフトウェア(HTTPサーバー)を入れる必要があります。
では、Apacheをインストールしていきましょう！！

```:ターミナル
yum -y install httpd
```

上記のコマンドでApacheをインストールしましょう！！

#Apacheの起動
ではインストールしたApacheを起動させましょう
下記のコマンドで起動させます

```:ターミナル
systemctl start httpd
```

コマンドを入力したらApacheが起動されているか確認しましょう
下記のコマンドでステータスを確認しましょう

```:ターミナル
systemctl status httpd
```

**Apacheスタート！！**みたいなメッセージが出ていればOKです

#Apache自動起動設定
上記のコマンドでApacheを起動させることがわかりましたが、
毎回これをするのはめんどくさいので、Apacheを自動起動にしておきましょう
下記のコマンドで自動起動に設定できます

```:ターミナル
systemctl enable httpd.service
```

#ファイヤウォールの解除
このままの状態だとファイヤーウォールが邪魔してアクセスできないので、
ファイヤーウォールを解除しましょう
下記のコマンドで解除です

```:ターミナル
firewall-cmd --add-service=http --zone=public --permanent
firewall-cmd --reload
```

#ブラウザから起動を確認
設定が完了したか確認しましょう
ブラウザを起動させてゲストOSのIPアドレス(192.168.xx.xみたいなやつ)にアクセスしましょう
下記のような画面が表示されると完了です。
<img width="1440" alt="スクリーンショット 2020-02-02 0.03.38.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/429676/42a4ab11-5f52-62d9-a57d-20c6e51641da.png">

以上です。

**ここまで読んでいただきありがとうございました！！
疑問、気になるところがございましたら、質問、コメントよろしくお願いします！！！**
